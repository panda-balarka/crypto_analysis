<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TRX Staking Yield Analysis</title>
    <link rel="stylesheet" href="css/trx-analysis.css">
</head>
<body>
    <div class="container">
        <h1>TRX STAKING ANALYSIS</h1>
        
        <div class="content-wrapper">
            <!-- Input Block -->
            <div class="card">
                <h2>INPUTS</h2>
                
                <!-- Price and Address Input Row -->
                <div class="price-address-row">
                    <!-- Price Display Card -->
                    <div class="price-display-small">
                        <div class="price-label">TRX/USD</div>
                        <div class="price-value" id="currentPrice" onclick="enableManualPrice()">Loading...</div>
                        <div class="manual-price-input" id="manualPriceInput" style="display: none;">
                            <input type="text" id="manualPrice" placeholder="0.0000" pattern="[0-9]*\.?[0-9]*" oninput="validateNumberInput(this); updateManualPrice();" onkeydown="handleManualPriceEnter(event)">
                            <span class="price-unit">USD</span>
                            <button type="button" class="price-confirm-btn" onclick="confirmManualPrice()">âœ“</button>
                        </div>
                    </div>
                    
                    <!-- TRX Address Input -->
                    <div class="address-input-section" id="addressInputSection">
                        <div class="address-label">TRX Address to pre-fetch data for some feilds below <span id="fetchDataHelp" style="cursor: pointer; font-size: 0.75rem; color: var(--comment);" title="Fetch Data will auto-fill: Stake TRX Amount, Yield based on votes and SR APY, Current Energy/Bandwidth Split and Parameters">(?)</span></div>
                        <div class="address-input-wrapper">
                            <input type="text" id="trxAddress" placeholder="Enter TRX public address (T...)" class="address-input" disabled>
                            <button type="button" class="fetch-data-btn" id="fetchDataBtn" onclick="fetchTRXData()" disabled>Fetch Data</button>
                        </div>
                        <div class="connection-status" id="connectionStatus">Checking connection...</div>
                    </div>
                </div>
                
                <!-- Two Column Layout -->
                <div class="input-columns">
                    <!-- Left Column: Staking Parameters -->
                    <div class="input-column">
                        
                        <!-- Staking Attributes Block -->
                        <div class="lending-block" style="margin-top: calc(var(--base-unit) * -2.8);">
                            <h4>Staking Inputs</h4>
                            <div class="lending-inputs">
                                <div class="input-group">
                                    <label for="trxAmount">current amount: <span class="string">trx units</span></label>
                                    <div class="input-wrapper">
                                        <input type="text" id="trxAmount" placeholder="0.00" pattern="[0-9]*\.?[0-9]*" oninput="validateNumberInput(this); updateStakingSplit();">
                                    </div>
                                </div>
                                
                                <div class="input-group">
                                    <label for="stakingYield">yield: <span class="string">percentage</span></label>
                                    <div class="input-wrapper yield-input-wrapper">
                                        <span class="yield-unit">%</span>
                                        <input type="text" id="stakingYield" placeholder="0.00" pattern="[0-9]*\.?[0-9]*" oninput="validateNumberInput(this)">
                                        <button type="button" class="yield-dropdown-btn" onclick="toggleYieldDropdown()" id="yieldDropdownBtn">
                                            <svg width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M1 1L6 6L11 1" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg>
                                        </button>
                                        <div class="yield-dropdown" id="yieldDropdown" style="display: none;">
                                            <div class="dropdown-search">
                                                <input type="text" id="yieldSearchInput" placeholder="Search SRs..." autocomplete="off">
                                            </div>
                                            <div class="dropdown-list" id="yieldDropdownList">
                                                <!-- Dropdown items will be populated dynamically by JavaScript -->
                                            </div>
                                        </div>
                                    </div>
                                    <div class="connection-status" id="yieldConnectionStatus">Checking Tronscan API...</div>
                                </div>
                                
                                <div class="input-group">
                                    <label>duration: <span class="string">time</span></label>
                                    <div class="time-inputs">
                                        <input type="number" id="years" placeholder="years" min="0" max="100" step="1">
                                        <input type="number" id="months" placeholder="months" min="0" max="11" step="1">
                                    </div>
                                </div>
                                
                                <div class="input-group">
                                    <label>frequency: <span class="string">claim/reinvest</span></label>
                                    <div class="claim-frequency-wrapper">
                                        <select id="claimFrequency" onchange="toggleCustomDays()">
                                            <option value="1">Daily</option>
                                            <option value="7">Weekly</option>
                                            <option value="30" selected>Monthly (30 days)</option>
                                            <option value="custom">Custom (days)</option>
                                        </select>
                                        <input type="number" id="customDays" placeholder="days" min="1" max="365" step="1" style="display: none;">
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Additional Investment Block -->
                        <div class="lending-block">
                            <h4>Additional Investment <span id="additionalInvestmentHelp" style="cursor: pointer; font-size: 0.75rem; color: var(--comment);" title="Requires TRX/USD price">(?)</span></h4>
                            <div class="lending-inputs additional-investment-content">
                                <div class="input-group">
                                    <label for="investmentAmount">amount: <span class="string">USD</span></label>
                                    <div class="input-wrapper">
                                        <input type="text" id="investmentAmount" placeholder="0.00" pattern="[0-9]*\.?[0-9]*" oninput="validateNumberInput(this); updateAdditionalInvestment();">
                                        <span class="unit">$</span>
                                    </div>
                                </div>
                                
                                <div class="input-group">
                                    <label for="investmentFrequency">frequency: <span class="string">days</span></label>
                                    <div class="input-wrapper">
                                        <select id="investmentFrequency" onchange="updateAdditionalInvestment()">
                                            <option value="7">Weekly</option>
                                            <option value="14">Bi-weekly</option>
                                            <option value="30" selected>Monthly</option>
                                            <option value="90">Quarterly</option>
                                            <option value="365">Yearly</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Second Column: Restructured Layout -->
                    <div class="input-column" id="stakingSplitColumn">
                        <!-- Row Block 1: Current Split and Restake Split side by side -->
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16.2px; margin-bottom: calc(var(--base-unit) * -0.56); margin-top: calc(var(--base-unit) * -2.8);">
                            <!-- Current Staking Block -->
                            <div class="lending-block">
                                <h4>Current Staking <span style="cursor: pointer; font-size: 0.75rem; color: var(--comment);" title="Requires TRX amount > 0">(?)</span></h4>
                                <div class="lending-inputs staking-content">
                                    <div class="input-group">
                                        <div class="toggle-wrapper">
                                            <span class="toggle-label">ratio</span>
                                            <label class="toggle-switch">
                                                <input type="checkbox" id="stakingSplitMode" onchange="toggleStakingMode()">
                                                <span class="toggle-slider"></span>
                                            </label>
                                            <span class="toggle-label">values</span>
                                        </div>
                                    </div>
                                    
                                    <!-- Ratio Mode -->
                                    <div id="ratioMode" class="staking-mode">
                                        <div class="input-group">
                                            <label>energy/bandwidth: <span class="string">ratio</span></label>
                                            <div class="slider-wrapper">
                                                <input type="range" id="ratioSlider" min="0" max="100" value="50" oninput="updateRatioDisplay()">
                                                <div class="slider-labels">
                                                    <span>Energy: <span id="energyRatio">50</span>%</span>
                                                    <span>Bandwidth: <span id="bandwidthRatio">50</span>%</span>
                                                </div>
                                                <div class="split-display">
                                                    <div class="split-item">
                                                        <span class="split-label">Energy TRX:</span>
                                                        <span id="energyTrx">0</span>
                                                    </div>
                                                    <div class="split-item">
                                                        <span class="split-label">Bandwidth TRX:</span>
                                                        <span id="bandwidthTrx">0</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Values Mode -->
                                    <div id="valuesMode" class="staking-mode" style="display: none;">
                                        <div class="input-group">
                                            <label for="energyAmount">energy: <span class="string">trx units</span></label>
                                            <div class="input-wrapper">
                                                <input type="text" id="energyAmount" placeholder="0.00" pattern="[0-9]*\.?[0-9]*" oninput="validateNumberInput(this); autoCalculateSplit(this, 'energy');">
                                            </div>
                                        </div>
                                        
                                        <div class="input-group" style="margin-bottom: calc(var(--space-2xl) - var(--base-unit) * 6.67);">
                                            <label for="bandwidthAmount">bandwidth: <span class="string">trx units</span></label>
                                            <div class="input-wrapper">
                                                <input type="text" id="bandwidthAmount" placeholder="0.00" pattern="[0-9]*\.?[0-9]*" oninput="validateNumberInput(this); autoCalculateSplit(this, 'bandwidth');">
                                            </div>
                                        </div>
                                        
                                        <div class="validation-message" id="splitValidation" style="display: none; margin-bottom: var(--base-unit) * 6.67;"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Restake Split Block -->
                            <div class="lending-block">
                                <h4>Restake Split <span style="cursor: pointer; font-size: 0.75rem; color: var(--comment);" title="Requires TRX amount > 0">(?)</span></h4>
                                <div class="lending-inputs staking-content">
                                    <div class="input-group">
                                        <div style="text-align: center; margin-top: calc(var(--base-unit) * 3.9); font-size: calc(var(--base-unit) * 5.2); color: var(--text); font-family: 'JetBrains Mono', monospace;">only ratio supported</div>
                                    </div>
                                    <div class="input-group" style="margin-top: 6.4px;">
                                        <label>energy/bandwidth: <span class="string">ratio</span></label>
                                        <div class="slider-wrapper">
                                            <input type="range" id="restakeRatioSlider" min="0" max="100" value="50" oninput="updateRestakeRatioDisplay()">
                                            <div class="slider-labels">
                                                <span>Energy: <span id="restakeEnergyRatio">50</span>%</span>
                                                <span>Bandwidth: <span id="restakeBandwidthRatio">50</span>%</span>
                                            </div>
                                            <div class="split-display">
                                                <div class="split-item">
                                                    <span class="split-label">Energy Restake:</span>
                                                    <span id="restakeEnergyPercent">50%</span>
                                                </div>
                                                <div class="split-item">
                                                    <span class="split-label">Bandwidth Restake:</span>
                                                    <span id="restakeBandwidthPercent">50%</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Row Block 2: Lending Section -->
                        <div id="lendingColumn">
                            
                            <!-- Lending Block -->
                            <div class="lending-block">
                                <h4>Lending Inputs</h4>
                                <div class="input-group">
                                    <div class="toggle-wrapper">
                                        <span class="toggle-label">disabled</span>
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="lendingMode" onchange="toggleLendingMode()">
                                            <span class="toggle-slider"></span>
                                        </label>
                                        <span class="toggle-label">enabled</span>
                                    </div>
                                </div>
                                
                                <!-- Energy and Bandwidth Lending side by side -->
                                <div id="lendingInputsContainer" style="display: grid; grid-template-columns: 1fr 1fr; gap: 16.2px;">
                                    <!-- Energy Lending -->
                                    <div class="lending-inputs">
                                        <div class="input-group">
                                            <label for="energyLendingRate">energy lending rate: <span class="string">sun/day</span></label>
                                            <div class="input-wrapper">
                                                <input type="text" id="energyLendingRate" placeholder="0.00" pattern="[0-9]*\.?[0-9]*" oninput="validateNumberInput(this)">
                                                <span class="unit">SUN</span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Bandwidth Lending -->
                                    <div class="lending-inputs">
                                        <div class="input-group">
                                            <label for="bandwidthLendingRate">bandwidth lending rate: <span class="string">sun/day</span></label>
                                            <div class="input-wrapper">
                                                <input type="text" id="bandwidthLendingRate" placeholder="0.00" pattern="[0-9]*\.?[0-9]*" oninput="validateNumberInput(this)">
                                                <span class="unit">SUN</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        
                            <!-- TRX Growth Inputs Block - separate from lending -->
                            <div class="lending-block">
                                <h4>TRX Growth Inputs <span id="trxGrowthHelp" style="cursor: pointer; font-size: 0.75rem; color: var(--comment);" title="Project TRX/USD price appreciation or depreciation over your investment duration to calculate future value impact">(?)</span></h4>
                                <div class="input-group">
                                    <div class="toggle-wrapper">
                                        <span class="toggle-label">disabled</span>
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="growthMode" onchange="toggleGrowthMode()">
                                            <span class="toggle-slider"></span>
                                        </label>
                                        <span class="toggle-label">enabled</span>
                                    </div>
                                </div>
                                
                                <!-- Growth Rate and Growth Period side by side -->
                                <div id="growthInputsContainer" style="display: grid; grid-template-columns: 1fr 1fr; gap: 16.2px;">
                                    <!-- Growth Rate -->
                                    <div class="lending-inputs">
                                        <div class="input-group">
                                            <label for="growthRate">growth rate: <span class="string">percentage</span></label>
                                            <div class="input-wrapper">
                                                <input type="text" id="growthRate" placeholder="0.00" pattern="[0-9]*\.?[0-9]*" oninput="validateNumberInput(this)">
                                                <span class="unit">%</span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Growth Period -->
                                    <div class="lending-inputs">
                                        <div class="input-group">
                                            <label for="growthPeriod">growth period: <span class="string">time</span></label>
                                            <div class="input-wrapper">
                                                <select id="growthPeriod">
                                                    <option value="30">Monthly (30 days)</option>
                                                    <option value="90">Quarterly (90 days)</option>
                                                    <option value="180">Half Yearly (180 days)</option>
                                                    <option value="365" selected>Yearly (365 days)</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Footer Note moved above calculate button -->
                <div class="note" style="margin-top: calc(var(--space-xl) * -1.5 + var(--base-unit) * 3.33); margin-bottom: calc(var(--space-lg) + var(--base-unit) * 1.11); font-size: var(--font-sm); padding: calc(var(--space-xl) * 0.5) calc(var(--space-xl) * 1.0);">
                    Find this useful? Appreciate coffee addiction support ðŸ˜œ (TVYaURNqrpmCCJJr3Lrm5pTRnyiB8jSWc4)
                </div>

                <button onclick="calculateYield()">Calculate()</button>
            </div>
            
            <!-- Output Block -->
            <div class="card">
                <h2>RESULTS</h2>
                
                <div class="results-grid" id="results">
                    <!-- Row 1: Initial Amount (2 cards), Additional Principal (2 cards), Growth Rate (1 card) -->
                    <div class="result-item">
                        <div class="result-label">Initial Amount</div>
                        <div class="result-value">
                            <span id="initialAmount">0 TRX</span>
                            <span class="result-value-small" id="initialAmountUSD">($0.00)</span>
                        </div>
                    </div>
                    
                    <div class="result-item">
                        <div class="result-label">Addn Principle</div>
                        <div class="result-value">
                            <span id="additionalPrincipal">0 TRX</span>
                            <span class="result-value-small" id="additionalPrincipalUSD">($0.00)</span>
                        </div>
                    </div>
                    
                    <div class="result-item">
                        <div class="result-label">Annual Growth Rate</div>
                        <div class="result-value" id="growthRateOutput">0%</div>
                    </div>
                    
                    <!-- Row 2: Staking Rewards, Staking APY -->
                    <div class="result-item">
                        <div class="result-label">Staking Rewards</div>
                        <div class="result-value">
                            <span id="stakingRewards">0 TRX</span>
                            <span class="result-value-small" id="stakingRewardsUSD">($0.00)</span>
                        </div>
                    </div>
                    
                    <div class="result-item">
                        <div class="result-label">
                            Staking APY
                            <span style="cursor: pointer; font-size: 0.75rem; color: var(--comment);" title="APY from staking rewards based on claim frequency">(?)</span>
                        </div>
                        <div class="result-value" id="stakingApy">0%</div>
                    </div>
                    
                    <div class="result-item">
                        <div class="result-label">
                            Staking Income Monthly
                            <span style="cursor: pointer; font-size: 0.75rem; color: var(--comment);" title="Monthly TRX income from staking rewards at end of projection period">(?)</span>
                        </div>
                        <div class="result-value">
                            <span id="stakingIncomeMonthly">0 TRX</span>
                            <span class="result-value-small" id="stakingIncomeMonthlyUSD">($0.00)</span>
                        </div>
                    </div>
                    
                    <!-- Row 3: Energy Income, Bandwidth Income, Total Lending Income, Lending APY -->
                    <div class="result-item">
                        <div class="result-label">Energy Income</div>
                        <div class="result-value">
                            <span id="energyIncome">0 TRX</span>
                            <span class="result-value-small" id="energyIncomeUSD">($0.00)</span>
                        </div>
                    </div>
                    
                    <div class="result-item">
                        <div class="result-label">Bandwidth Income</div>
                        <div class="result-value">
                            <span id="bandwidthIncome">0 TRX</span>
                            <span class="result-value-small" id="bandwidthIncomeUSD">($0.00)</span>
                        </div>
                    </div>
                    
                    <div class="result-item">
                        <div class="result-label">Total Lending</div>
                        <div class="result-value">
                            <span id="lendingIncome">0 TRX</span>
                            <span class="result-value-small" id="lendingIncomeUSD">($0.00)</span>
                        </div>
                    </div>
                    
                    <div class="result-item">
                        <div class="result-label">
                            Lending APY
                            <span style="cursor: pointer; font-size: 0.75rem; color: var(--comment);" title="APY from lending energy/bandwidth based on rates and payout frequency">(?)</span>
                        </div>
                        <div class="result-value" id="lendingApy">0%</div>
                    </div>
                    
                    <div class="result-item">
                        <div class="result-label">
                            Lending Income Monthly
                            <span style="cursor: pointer; font-size: 0.75rem; color: var(--comment);" title="Monthly TRX income from lending energy/bandwidth at end of projection period">(?)</span>
                        </div>
                        <div class="result-value">
                            <span id="lendingIncomeMonthly">0 TRX</span>
                            <span class="result-value-small" id="lendingIncomeMonthlyUSD">($0.00)</span>
                        </div>
                    </div>
                    
                    <!-- Row 4: Total Invested (2 cards), Final Total (2 cards), Combined APY (1 card) -->
                    <div class="result-item">
                        <div class="result-label">Total Invested</div>
                        <div class="result-value">
                            <span id="investedAmount">0 TRX</span>
                            <span class="result-value-small" id="investedAmountUSD">($0.00)</span>
                        </div>
                    </div>
                    
                    <div class="result-item">
                        <div class="result-label">Final Total</div>
                        <div class="result-value">
                            <span id="totalAmount">0 TRX</span>
                            <span class="result-value-small" id="totalAmountUSD">($0.00)</span>
                        </div>
                    </div>
                    
                    <div class="result-item">
                        <div class="result-label">
                            Combined APY
                            <span style="cursor: pointer; font-size: 0.75rem; color: var(--comment);" title="Total APY combining staking and lending yields">(?)</span>
                        </div>
                        <div class="result-value" id="combinedApy">0%</div>
                    </div>
                    
                </div>

                <!-- Calculation Buttons -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-lg); margin-top: calc(var(--base-unit) * -6.1);">
                    <button class="expand-calculations-btn" onclick="showCalculationsModal()">
                        ðŸ“Š View Table
                    </button>
                    <button class="expand-calculations-btn" onclick="showGraphModal()">
                        ðŸ“ˆ View Graph
                    </button>
                </div>

                <!-- Network Parameters Section -->
                <div style="margin-top: calc(var(--space-xl) + calc(var(--base-unit) * 3.34));">
                    <h2 style="margin-bottom: calc(var(--space-lg) * 0.75 + var(--base-unit) * 2.78); font-size: calc(var(--font-base) * 1.15);">NETWORK PARAMETERS</h2>
                    <div style="background: rgba(255,255,255,0.02); border: 1px solid var(--border); border-radius: var(--radius-xl); padding: var(--space-xl); display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-2xl);">
                        <!-- Column 1: Network Values -->
                        <div>
                            <div class="network-item">
                                <span class="network-label">Total Net Weight:</span>
                                <span class="network-value" id="totalNetWeight">Loading...</span>
                            </div>
                            <div class="network-item">
                                <span class="network-label">Total Energy Weight:</span>
                                <span class="network-value" id="totalEnergyWeight">Loading...</span>
                            </div>
                            <div class="network-item">
                                <span class="network-label">Total Net Limit:</span>
                                <span class="network-value" id="totalNetLimit">Loading...</span>
                            </div>
                            <div class="network-item">
                                <span class="network-label">Total Energy Limit:</span>
                                <span class="network-value" id="totalEnergyLimit">Loading...</span>
                            </div>
                            <div class="network-item">
                                <span class="network-label">Energy/stakedTRX:</span>
                                <span class="network-value" id="energyPerStakedTRX">Loading...</span>
                            </div>
                            <div class="network-item">
                                <span class="network-label">Bandwidth/stakedTRX:</span>
                                <span class="network-value" id="bandwidthPerStakedTRX">Loading...</span>
                            </div>
                        </div>
                        
                        <!-- Column 2: Available Resources -->
                        <div>
                            <div class="network-item">
                                <span class="network-label">Account Energy Initial:</span>
                                <span class="network-value" id="energyAvailable">0</span>
                            </div>
                            <div class="network-item">
                                <span class="network-label">Account Bandwidth Initial:</span>
                                <span class="network-value" id="bandwidthAvailable">0</span>
                            </div>
                            <div class="network-item">
                                <span class="network-label">Account Energy Final:</span>
                                <span class="network-value" id="energyFinal">0</span>
                            </div>
                            <div class="network-item">
                                <span class="network-label">Account Bandwidth Final:</span>
                                <span class="network-value" id="bandwidthFinal">0</span>
                            </div>
                        </div>
                    </div>
                </div>
                

            </div>
        </div>
    </div>

    <!-- Calculations Modal -->
    <div id="calculationsModal" class="modal-overlay" onclick="closeModal(event)">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">ðŸ“Š Period-by-Period Calculation Breakdown</div>
                <button class="close-btn" onclick="closeCalculationsModal()">&times;</button>
            </div>
            <div id="calculationsTableContainer">
                <!-- Table will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Graph Modal -->
    <div id="graphModal" class="modal-overlay" onclick="closeModal(event)">
        <div class="modal-content" style="max-width: 98%; width: 1600px;">
            <div class="modal-header">
                <div class="modal-title">ðŸ“ˆ Growth Visualization</div>
                <button class="close-btn" onclick="closeGraphModal()">&times;</button>
            </div>
            <div id="graphContainer" style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                <!-- TRX Chart -->
                <div style="text-align: center;">
                    <h3 style="margin-bottom: 10px; font-size: 1rem; color: var(--keyword); font-family: 'JetBrains Mono', monospace;">TRX Balance Growth</h3>
                    <canvas id="trxChart" width="600" height="400"></canvas>
                </div>
                <!-- USD Chart -->
                <div style="text-align: center;">
                    <h3 style="margin-bottom: 10px; font-size: 1rem; color: var(--keyword); font-family: 'JetBrains Mono', monospace;">USD Value Growth</h3>
                    <canvas id="usdChart" width="600" height="400"></canvas>
                </div>
            </div>
            <div id="chartLegend" style="margin-top: 14.4px; text-align: center; font-size: 0.75rem; color: var(--text);"></div>
        </div>
    </div>

    <!-- Custom Error Modal -->
    <div id="errorModal" class="modal-overlay" style="display: none;">
        <div class="modal-content" style="max-width: calc(var(--base-unit) * 450); margin: 25vh auto; padding: calc(var(--space-md) * 1.11) calc(var(--space-lg) * 0.93);">
            <div style="display: flex; align-items: center; gap: calc(var(--space-sm) * 1.22);">
                <div id="errorMessage" style="flex: 1; font-size: calc(var(--font-sm) * 1.43); line-height: 1.2; color: var(--text);">
                    <!-- Error message will be populated here -->
                </div>
                <span onclick="closeErrorModal()" style="color: var(--muted); font-size: calc(var(--space-lg) * 1.209); cursor: pointer; width: calc(var(--space-md) * 1.443); height: calc(var(--space-md) * 1.443); display: flex; align-items: center; justify-content: center; flex-shrink: 0;" onmouseover="this.style.color='var(--text)'" onmouseout="this.style.color='var(--muted)'">&times;</span>
            </div>
        </div>
    </div>

    <!-- Custom Success Modal -->
    <div id="successModal" class="modal-overlay" style="display: none;">
        <div class="modal-content" style="max-width: calc(var(--base-unit) * 450); margin: 25vh auto; padding: calc(var(--space-md) * 1.11) calc(var(--space-lg) * 0.93);">
            <div style="display: flex; align-items: center; gap: calc(var(--space-sm) * 1.22);">
                <div id="successMessage" style="flex: 1; font-size: calc(var(--font-sm) * 1.43); line-height: 1.2; color: var(--text);">
                    <!-- Success message will be populated here -->
                </div>
                <span onclick="closeSuccessModal()" style="color: var(--muted); font-size: calc(var(--space-lg) * 1.209); cursor: pointer; width: calc(var(--space-md) * 1.443); height: calc(var(--space-md) * 1.443); display: flex; align-items: center; justify-content: center; flex-shrink: 0;" onmouseover="this.style.color='var(--text)'" onmouseout="this.style.color='var(--muted)'">&times;</span>
            </div>
        </div>
    </div>

    <script src="js/trx-analysis.js"></script>
</body>
</html>